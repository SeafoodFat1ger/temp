import"./index-BHh1TLVf.js";import{N as V}from"./index-B-44DXlN.js";import{u as U,i as m,A as B,a as l,c as C,b as t,s as u,p as r,x as p,F as d,h as v,R as D,o,g as N}from"./index-BXgsGGBr.js";import{p as k}from"./index-BAswO634.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D5UzUt9W.js";import"./interceptor-B_IeSHt0.js";const E={class:"profile-info"},M={class:"header"},S={class:"avatar"},F={class:"username"},R={class:"stats"},T={class:"stat-item"},A={class:"stat-number"},j={class:"stat-item"},q={class:"stat-number"},z={class:"stat-item"},G={class:"stat-number"},H={class:"info"},J={class:"actions"},K={key:1},L={__name:"profile_info",setup(O){const f=U(),a=m([]);async function y(){k("/api/profile/getUserInfo/",{userId:f.auth.user.userId},(I,e)=>{a.value=e.userInfo})}const i=m(!1),s=m({});function g(){i.value=!0,s.value={...a.value}}function b(){i.value=!1}function _(){k("/api/profile/editInfo/",{userId:f.auth.user.userId,...s.value},()=>{a.value={...s.value},i.value=!1})}function c(){N.push("/home/profile")}return B(()=>{y()}),(I,e)=>{const x=V;return o(),l("div",E,[C(x,{title:"个人信息","left-arrow":"",onClick:c}),t("div",M,[t("div",S,u(a.value.avatar),1),t("div",F,u(a.value.username),1)]),t("div",R,[t("div",T,[t("div",A,u(a.value.borrowedBooks),1),e[6]||(e[6]=t("div",{class:"stat-label"},"已借图书",-1))]),t("div",j,[t("div",q,u(a.value.totalBooks),1),e[7]||(e[7]=t("div",{class:"stat-label"},"总借书量",-1))]),t("div",z,[t("div",G,u(a.value.postedReviews),1),e[8]||(e[8]=t("div",{class:"stat-label"},"发表评论",-1))])]),t("div",H,[t("p",null,[e[9]||(e[9]=t("strong",null,"用户名：",-1)),i.value?r((o(),l("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.username=n),type:"text"},null,512)),[[p,s.value.username]]):(o(),l(d,{key:1},[v(u(a.value.username),1)],64))]),t("p",null,[e[10]||(e[10]=t("strong",null,"昵称：",-1)),i.value?r((o(),l("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.nickname=n),type:"text"},null,512)),[[p,s.value.nickname]]):(o(),l(d,{key:1},[v(u(a.value.nickname),1)],64))]),t("p",null,[e[11]||(e[11]=t("strong",null,"生日：",-1)),i.value?r((o(),l("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.birthday=n),type:"date"},null,512)),[[p,s.value.birthday]]):(o(),l(d,{key:1},[v(u(a.value.birthday),1)],64))]),t("p",null,[e[13]||(e[13]=t("strong",null,"性别：",-1)),i.value?r((o(),l("select",{key:0,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.gender=n)},e[12]||(e[12]=[t("option",{value:"男"},"男",-1),t("option",{value:"女"},"女",-1)]),512)),[[D,s.value.gender]]):(o(),l(d,{key:1},[v(u(a.value.gender),1)],64))]),t("p",null,[e[14]||(e[14]=t("strong",null,"学号：",-1)),i.value?r((o(),l("input",{key:0,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.studentID=n),type:"text"},null,512)),[[p,s.value.studentID]]):(o(),l(d,{key:1},[v(u(a.value.studentID),1)],64))]),t("p",null,[e[15]||(e[15]=t("strong",null,"邮箱：",-1)),i.value?r((o(),l("input",{key:0,"onUpdate:modelValue":e[5]||(e[5]=n=>s.value.email=n),type:"email"},null,512)),[[p,s.value.email]]):(o(),l(d,{key:1},[v(u(a.value.email),1)],64))])]),t("div",J,[i.value?(o(),l("div",K,[t("button",{onClick:_,class:"save-button"},"保存"),t("button",{onClick:b,class:"cancel-button"},"取消")])):(o(),l("button",{key:0,onClick:g,class:"edit-button"},"修改信息"))])])}}},h=w(L,[["__scopeId","data-v-c3753337"]]);export{h as default};
