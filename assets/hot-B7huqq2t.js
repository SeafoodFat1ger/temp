import"./index-BHh1TLVf.js";import{N as m}from"./index-B-44DXlN.js";import{a as g,p as h}from"./index-BAswO634.js";import{g as v,u as f,a as n,c as _,b as e,F as b,q as k,p as x,x as B,z as M,o as a,s as u,f as d}from"./index-BXgsGGBr.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D5UzUt9W.js";import"./interceptor-B_IeSHt0.js";const T={data(){return{input:"",messages:[]}},methods:{goBack(){v.push("/home/profile")},sendMessage(){if(console.log("消息:",this.input),this.input.trim()==="")return;if(this.input.length>500){g("输入过长，没有Token的米了呜呜"),this.input="";return}this.messages.push({type:"user",content:this.input});const r=f();h("/api//LLM/postMessage/",{userId:r.auth.user.userId,input:this.input},(s,l)=>{this.messages.push({type:"bot",content:l.output}),this.scrollToBottom()}),this.input="",this.scrollToBottom()},scrollToBottom(){this.$nextTick(()=>{this.$refs.chatBox.scrollTop=this.$refs.chatBox.scrollHeight})}}},C={class:"chat-box-container"},N={class:"chat-box",ref:"chatBox"},w={key:0,class:"user-message"},V={class:"message-content user-message-content"},F={key:1,class:"bot-message"},I={class:"message-content bot-message-content"},L={class:"input-area"},D={class:"input-area"};function K(r,s,l,S,i,o){const c=m;return a(),n("div",C,[_(c,{title:"图书推荐助手","left-arrow":"",onClick:o.goBack},null,8,["onClick"]),e("div",N,[(a(!0),n(b,null,k(i.messages,(t,p)=>(a(),n("div",{key:p,class:"message"},[t.type==="user"?(a(),n("div",w,[s[5]||(s[5]=e("div",{class:"avatar"},"🤠",-1)),e("div",V,u(t.content),1)])):d("",!0),t.type==="bot"?(a(),n("div",F,[s[6]||(s[6]=e("div",{class:"avatar"},"🤖",-1)),e("div",I,u(t.content),1)])):d("",!0)]))),128))],512),e("div",L,[x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.input=t),type:"text",placeholder:"请输入您的问题...",onKeyup:s[1]||(s[1]=M((...t)=>o.sendMessage&&o.sendMessage(...t),["enter"])),class:"input-field"},null,544),[[B,i.input]]),e("button",{onClick:s[2]||(s[2]=(...t)=>o.sendMessage&&o.sendMessage(...t)),class:"send-button"},"发送")]),e("div",D,[e("button",{onClick:s[3]||(s[3]=(...t)=>o.sendMessage&&o.sendMessage(...t)),class:"send-button"},"发送最近阅读历史"),e("button",{onClick:s[4]||(s[4]=(...t)=>o.sendMessage&&o.sendMessage(...t)),class:"send-button"},"发送我的兴趣爱好")])])}const G=y(T,[["render",K],["__scopeId","data-v-240ebb61"]]);export{G as default};
