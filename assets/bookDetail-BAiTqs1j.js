import"./index-BHh1TLVf.js";import{u as He}from"./index-B948Pb_U.js";/* empty css              *//* empty css              */import{C as Je}from"./index-Dsav_6um.js";import{u as De,F as Qe}from"./index-46_qGGFH.js";import{I as et}from"./index-BUuLlNgP.js";import{N as tt}from"./index-B-44DXlN.js";import{E as nt,G as at,d as O,i as I,r as Oe,k as z,n as N,H as W,c as o,A as Re,I as ot,J as lt,K as it,L as rt,p as st,v as ct,y as Fe,M as dt,N as ut,m as ft,j as mt,T as vt,F as ge,h as p,O as bt,u as ht,a as ve,b as _,s as q,w as U,D as gt,o as ce,q as $e,e as yt}from"./index-BXgsGGBr.js";import{u as we,L as wt,d as kt,p as ze,s as xe,g as Tt}from"./index-BAswO634.js";import{_ as xt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{J as Me,r as _e,G as Ue,D as Ct,K as St,d as pe,c as F,L as Pe,M as We,e as je,g as _t,f as ke,N as ye,h as E,O as Ze,P as Bt,n as V,l as J,m as j,w as Q,v as Ce,u as It,o as Rt,t as Z,x as Be,k as ne,B as Pt,Q as $t,R as Ve,b as zt,s as Vt,a as At,j as Lt,z as Ae,H as Nt,I as Ie,y as Et,A as Ht,p as Dt}from"./index-D5UzUt9W.js";import{a as Ot,r as Ft}from"./use-route-Cqe9Mgvt.js";import{S as Mt,a as Ut}from"./index-Cmesem0E.js";import{c as pt}from"./interceptor-B_IeSHt0.js";import{B as Wt}from"./index-BomqLrIU.js";function jt(e,t,l){let a,u=0;const n=e.scrollLeft,r=l===0?1:Math.round(l*1e3/16);let m=n;function b(){Me(a)}function i(){m+=(t-n)/r,e.scrollLeft=m,++u<r&&(a=_e(i))}return i(),b}function Zt(e,t,l,a){let u,n=Ue(e);const r=n<t,m=l===0?1:Math.round(l*1e3/16),b=(t-n)/m;function i(){Me(u)}function y(){n+=b,(r&&n>t||!r&&n<t)&&(n=t),Ct(e,n),r&&n<t||!r&&n>t?u=_e(y):a&&(u=_e(a))}return y(),i}function Ke(e,t){if(!St||!window.IntersectionObserver)return;const l=new IntersectionObserver(n=>{t(n[0].intersectionRatio>0)},{root:document.body}),a=()=>{e.value&&l.observe(e.value)},u=()=>{e.value&&l.unobserve(e.value)};nt(u),at(u),pe(a)}const[Kt,Xt]=F("sticky"),Gt={zIndex:V,position:J("top"),container:Object,offsetTop:j(0),offsetBottom:j(0)};var Yt=O({name:Kt,props:Gt,emits:["scroll","change"],setup(e,{emit:t,slots:l}){const a=I(),u=Pe(a),n=Oe({fixed:!1,width:0,height:0,transform:0}),r=I(!1),m=z(()=>We(e.position==="top"?e.offsetTop:e.offsetBottom)),b=z(()=>{if(r.value)return;const{fixed:d,height:x,width:s}=n;if(d)return{width:`${s}px`,height:`${x}px`}}),i=z(()=>{if(!n.fixed||r.value)return;const d=je(_t(e.zIndex),{width:`${n.width}px`,height:`${n.height}px`,[e.position]:`${m.value}px`});return n.transform&&(d.transform=`translate3d(0, ${n.transform}px, 0)`),d}),y=d=>t("scroll",{scrollTop:d,isFixed:n.fixed}),k=()=>{if(!a.value||ye(a))return;const{container:d,position:x}=e,s=E(a),v=Ue(window);if(n.width=s.width,n.height=s.height,x==="top")if(d){const f=E(d),B=f.bottom-m.value-n.height;n.fixed=m.value>s.top&&f.bottom>0,n.transform=B<0?B:0}else n.fixed=m.value>s.top;else{const{clientHeight:f}=document.documentElement;if(d){const B=E(d),w=f-B.top-m.value-n.height;n.fixed=f-m.value<s.bottom&&f>B.top,n.transform=w<0?-w:0}else n.fixed=f-m.value<s.bottom}y(v)};return N(()=>n.fixed,d=>t("change",d)),ke("scroll",k,{target:u,passive:!0}),Ke(a,k),N([Ze,Bt],()=>{!a.value||ye(a)||!n.fixed||(r.value=!0,W(()=>{const d=E(a);n.width=d.width,n.height=d.height,r.value=!1}))}),()=>{var d;return o("div",{ref:a,style:b.value},[o("div",{class:Xt({fixed:n.fixed&&!r.value}),style:i.value},[(d=l.default)==null?void 0:d.call(l)])])}}});const qt=Q(Yt),[Jt,Le]=F("tabs");var Qt=O({name:Jt,props:{count:Ce(Number),inited:Boolean,animated:Boolean,duration:Ce(V),swipeable:Boolean,lazyRender:Boolean,currentIndex:Ce(Number)},emits:["change"],setup(e,{emit:t,slots:l}){const a=I(),u=m=>t("change",m),n=()=>{var m;const b=(m=l.default)==null?void 0:m.call(l);return e.animated||e.swipeable?o(Mt,{ref:a,loop:!1,class:Le("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:u},{default:()=>[b]}):b},r=m=>{const b=a.value;b&&b.state.active!==m&&b.swipeTo(m,{immediate:!e.inited})};return N(()=>e.currentIndex,r),Re(()=>{r(e.currentIndex)}),we({swipeRef:a}),()=>o("div",{class:Le("content",{animated:e.animated||e.swipeable})},[n()])}});const[Xe,be]=F("tabs"),en={type:J("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:j(0),duration:j(.3),animated:Boolean,ellipsis:Z,swipeable:Boolean,scrollspy:Boolean,offsetTop:j(0),background:String,lazyRender:Z,showHeader:Z,lineWidth:V,lineHeight:V,beforeChange:Function,swipeThreshold:j(5),titleActiveColor:String,titleInactiveColor:String},Ge=Symbol(Xe);var tn=O({name:Xe,props:en,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:t,slots:l}){let a,u,n,r,m;const b=I(),i=I(),y=I(),k=I(),d=De(),x=Pe(b),[s,v]=He(),{children:f,linkChildren:B}=It(Ge),w=Oe({inited:!1,position:"",lineStyle:{},currentIndex:-1}),T=z(()=>f.length>+e.swipeThreshold||!e.ellipsis||e.shrink),h=z(()=>({borderColor:e.color,background:e.background})),C=(c,g)=>{var S;return(S=c.name)!=null?S:g},H=z(()=>{const c=f[w.currentIndex];if(c)return C(c,w.currentIndex)}),D=z(()=>We(e.offsetTop)),ae=z(()=>e.sticky?D.value+a:0),M=c=>{const g=i.value,S=s.value;if(!T.value||!g||!S||!S[w.currentIndex])return;const $=S[w.currentIndex].$el,R=$.offsetLeft-(g.offsetWidth-$.offsetWidth)/2;r&&r(),r=jt(g,R,c?0:+e.duration)},A=()=>{const c=w.inited;W(()=>{const g=s.value;if(!g||!g[w.currentIndex]||e.type!=="line"||ye(b.value))return;const S=g[w.currentIndex].$el,{lineWidth:$,lineHeight:R}=e,L=S.offsetLeft+S.offsetWidth/2,Y={width:Be($),backgroundColor:e.color,transform:`translateX(${L}px) translateX(-50%)`};if(c&&(Y.transitionDuration=`${e.duration}s`),ne(R)){const me=Be(R);Y.height=me,Y.borderRadius=me}w.lineStyle=Y})},K=c=>{const g=c<w.currentIndex?-1:1;for(;c>=0&&c<f.length;){if(!f[c].disabled)return c;c+=g}},X=(c,g)=>{const S=K(c);if(!ne(S))return;const $=f[S],R=C($,S),L=w.currentIndex!==null;w.currentIndex!==S&&(w.currentIndex=S,g||M(),A()),R!==e.active&&(t("update:active",R),L&&t("change",R,$.title)),n&&!e.scrollspy&&$t(Math.ceil(Ve(b.value)-D.value))},G=(c,g)=>{const S=f.find((R,L)=>C(R,L)===c),$=S?f.indexOf(S):0;X($,g)},oe=(c=!1)=>{if(e.scrollspy){const g=f[w.currentIndex].$el;if(g&&x.value){const S=Ve(g,x.value)-ae.value;u=!0,m&&m(),m=Zt(x.value,S,c?0:+e.duration,()=>{u=!1})}}},de=(c,g,S)=>{const{title:$,disabled:R}=f[g],L=C(f[g],g);R||(pt(e.beforeChange,{args:[L],done:()=>{X(g),oe()}}),Ot(c)),t("clickTab",{name:L,title:$,event:S,disabled:R})},le=c=>{n=c.isFixed,t("scroll",c)},ie=c=>{W(()=>{G(c),oe(!0)})},ee=()=>{for(let c=0;c<f.length;c++){const{top:g}=E(f[c].$el);if(g>ae.value)return c===0?0:c-1}return f.length-1},Te=()=>{if(e.scrollspy&&!u){const c=ee();X(c)}},ue=()=>{if(e.type==="line"&&f.length)return o("div",{class:be("line"),style:w.lineStyle},null)},fe=()=>{var c,g,S;const{type:$,border:R,sticky:L}=e,Y=[o("div",{ref:L?void 0:y,class:[be("wrap"),{[Pt]:$==="line"&&R}]},[o("div",{ref:i,role:"tablist",class:be("nav",[$,{shrink:e.shrink,complete:T.value}]),style:h.value,"aria-orientation":"horizontal"},[(c=l["nav-left"])==null?void 0:c.call(l),f.map(me=>me.renderTitle(de)),ue(),(g=l["nav-right"])==null?void 0:g.call(l)])]),(S=l["nav-bottom"])==null?void 0:S.call(l)];return L?o("div",{ref:y},[Y]):Y},re=()=>{A(),W(()=>{var c,g;M(!0),(g=(c=k.value)==null?void 0:c.swipeRef.value)==null||g.resize()})};N(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],A),N(Ze,re),N(()=>e.active,c=>{c!==H.value&&G(c)}),N(()=>f.length,()=>{w.inited&&(G(e.active),A(),W(()=>{M(!0)}))});const se=()=>{G(e.active,!0),W(()=>{w.inited=!0,y.value&&(a=E(y.value).height),M(!0)})},qe=(c,g)=>t("rendered",c,g);return we({resize:re,scrollTo:ie}),ot(A),Rt(A),pe(se),Ke(b,A),ke("scroll",Te,{target:x,passive:!0}),B({id:d,props:e,setLine:A,scrollable:T,onRendered:qe,currentName:H,setTitleRefs:v,scrollIntoView:M}),()=>o("div",{ref:b,class:be([e.type])},[e.showHeader?e.sticky?o(qt,{container:b.value,offsetTop:D.value,onScroll:le},{default:()=>[fe()]}):fe():null,o(Qt,{ref:k,count:f.length,inited:w.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:w.currentIndex,onChange:X},{default:()=>{var c;return[(c=l.default)==null?void 0:c.call(l)]}})])}});const Ye=Symbol(),nn=()=>lt(Ye,null),[an,Ne]=F("tab"),on=O({name:an,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:V,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Z},setup(e,{slots:t}){const l=z(()=>{const u={},{type:n,color:r,disabled:m,isActive:b,activeColor:i,inactiveColor:y}=e;r&&n==="card"&&(u.borderColor=r,m||(b?u.backgroundColor=r:u.color=r));const d=b?i:y;return d&&(u.color=d),u}),a=()=>{const u=o("span",{class:Ne("text",{ellipsis:!e.scrollable})},[t.title?t.title():e.title]);return e.dot||ne(e.badge)&&e.badge!==""?o(zt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[u]}):u};return()=>o("div",{id:e.id,role:"tab",class:[Ne([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[a()])}}),[ln,Se]=F("tab"),rn=je({},Ft,{dot:Boolean,name:V,badge:V,title:String,disabled:Boolean,titleClass:Vt,titleStyle:[String,Object],showZeroBadge:Z});var sn=O({name:ln,props:rn,setup(e,{slots:t}){const l=De(),a=I(!1),u=mt(),{parent:n,index:r}=At(Ge);if(!n)return;const m=()=>{var s;return(s=e.name)!=null?s:r.value},b=()=>{a.value=!0,n.props.lazyRender&&W(()=>{n.onRendered(m(),e.title)})},i=z(()=>{const s=m()===n.currentName.value;return s&&!a.value&&b(),s}),y=I(""),k=I("");it(()=>{const{titleClass:s,titleStyle:v}=e;y.value=s?Fe(s):"",k.value=v&&typeof v!="string"?dt(ut(v)):v});const d=s=>o(on,ft({key:l,id:`${n.id}-${r.value}`,ref:n.setTitleRefs(r.value),style:k.value,class:y.value,isActive:i.value,controls:l,scrollable:n.scrollable.value,activeColor:n.props.titleActiveColor,inactiveColor:n.props.titleInactiveColor,onClick:v=>s(u.proxy,r.value,v)},Ae(n.props,["type","color","shrink"]),Ae(e,["dot","badge","title","disabled","showZeroBadge"])),{title:t.title}),x=I(!i.value);return N(i,s=>{s?x.value=!1:Lt(()=>{x.value=!0})}),N(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),rt(Ye,i),we({id:l,renderTitle:d}),()=>{var s;const v=`${n.id}-${r.value}`,{animated:f,swipeable:B,scrollspy:w,lazyRender:T}=n.props;if(!t.default&&!f)return;const h=w||i.value;if(f||B)return o(Ut,{id:l,role:"tabpanel",class:Se("panel-wrapper",{inactive:x.value}),tabindex:i.value?0:-1,"aria-hidden":!i.value,"aria-labelledby":v,"data-allow-mismatch":"attribute"},{default:()=>{var D;return[o("div",{class:Se("panel")},[(D=t.default)==null?void 0:D.call(t)])]}});const H=a.value||w||!T?(s=t.default)==null?void 0:s.call(t):null;return st(o("div",{id:l,role:"tabpanel",class:Se("panel"),tabindex:h?0:-1,"aria-labelledby":v,"data-allow-mismatch":"attribute"},[H]),[[ct,h]])}}});const cn=Q(sn),dn=Q(tn),[un,Ee]=F("tag"),fn={size:String,mark:Boolean,show:Z,type:J("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var mn=O({name:un,props:fn,emits:["close"],setup(e,{slots:t,emit:l}){const a=r=>{r.stopPropagation(),l("close",r)},u=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},n=()=>{var r;const{type:m,mark:b,plain:i,round:y,size:k,closeable:d}=e,x={mark:b,plain:i,round:y};k&&(x[k]=k);const s=d&&o(Ie,{name:"cross",class:[Ee("close"),Nt],onClick:a},null);return o("span",{style:u(),class:Ee([x,m])},[(r=t.default)==null?void 0:r.call(t),s])};return()=>o(vt,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?n():null]})}});const vn=Q(mn),[bn,P]=F("card"),hn={tag:String,num:V,desc:String,thumb:String,title:String,price:V,centered:Boolean,lazyLoad:Boolean,currency:J("¥"),thumbLink:String,originPrice:V};var gn=O({name:bn,props:hn,emits:["clickThumb"],setup(e,{slots:t,emit:l}){const a=()=>{if(t.title)return t.title();if(e.title)return o("div",{class:[P("title"),"van-multi-ellipsis--l2"]},[e.title])},u=()=>{if(t.tag||e.tag)return o("div",{class:P("tag")},[t.tag?t.tag():o(vn,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},n=()=>t.thumb?t.thumb():o(et,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),r=()=>{if(t.thumb||e.thumb)return o("a",{href:e.thumbLink,class:P("thumb"),onClick:i=>l("clickThumb",i)},[n(),u()])},m=()=>{if(t.desc)return t.desc();if(e.desc)return o("div",{class:[P("desc"),"van-ellipsis"]},[e.desc])},b=()=>{const i=e.price.toString().split(".");return o("div",null,[o("span",{class:P("price-currency")},[e.currency]),o("span",{class:P("price-integer")},[i[0]]),i.length>1&&o(ge,null,[p("."),o("span",{class:P("price-decimal")},[i[1]])])])};return()=>{var i,y,k;const d=t.num||ne(e.num),x=t.price||ne(e.price),s=t["origin-price"]||ne(e.originPrice),v=d||x||s||t.bottom,f=x&&o("div",{class:P("price")},[t.price?t.price():b()]),B=s&&o("div",{class:P("origin-price")},[t["origin-price"]?t["origin-price"]():`${e.currency} ${e.originPrice}`]),w=d&&o("div",{class:P("num")},[t.num?t.num():`x${e.num}`]),T=t.footer&&o("div",{class:P("footer")},[t.footer()]),h=v&&o("div",{class:P("bottom")},[(i=t["price-top"])==null?void 0:i.call(t),f,B,w,(y=t.bottom)==null?void 0:y.call(t)]);return o("div",{class:P()},[o("div",{class:P("header")},[r(),o("div",{class:P("content",{centered:e.centered})},[o("div",null,[a(),m(),(k=t.tags)==null?void 0:k.call(t)]),h])]),T])}}});const yn=Q(gn),[wn,te,kn]=F("list"),Tn={error:Boolean,offset:j(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:J("down"),loadingText:String,finishedText:String,immediateCheck:Z};var xn=O({name:wn,props:Tn,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:l}){const a=I(e.loading),u=I(),n=I(),r=nn(),m=Pe(u),b=z(()=>e.scroller||m.value),i=()=>{W(()=>{if(a.value||e.finished||e.disabled||e.error||(r==null?void 0:r.value)===!1)return;const{direction:s}=e,v=+e.offset,f=E(b);if(!f.height||ye(u))return;let B=!1;const w=E(n);s==="up"?B=f.top-w.top<=v:B=w.bottom-f.bottom<=v,B&&(a.value=!0,t("update:loading",!0),t("load"))})},y=()=>{if(e.finished){const s=l.finished?l.finished():e.finishedText;if(s)return o("div",{class:te("finished-text")},[s])}},k=()=>{t("update:error",!1),i()},d=()=>{if(e.error){const s=l.error?l.error():e.errorText;if(s)return o("div",{role:"button",class:te("error-text"),tabindex:0,onClick:k},[s])}},x=()=>{if(a.value&&!e.finished&&!e.disabled)return o("div",{class:te("loading")},[l.loading?l.loading():o(wt,{class:te("loading-icon")},{default:()=>[e.loadingText||kn("loading")]})])};return N(()=>[e.loading,e.finished,e.error],i),r&&N(r,s=>{s&&i()}),bt(()=>{a.value=e.loading}),Re(()=>{e.immediateCheck&&i()}),we({check:i}),ke("scroll",i,{target:b,passive:!0}),()=>{var s;const v=(s=l.default)==null?void 0:s.call(l),f=o("div",{ref:n,class:te("placeholder")},null);return o("div",{ref:u,role:"feed",class:te(),"aria-busy":a.value},[e.direction==="down"?v:f,x(),y(),d(),e.direction==="up"?v:f])}}});const Cn=Q(xn),[Sn,he]=F("rate");function _n(e,t,l,a){return e>=t?{status:"full",value:1}:e+.5>=t&&l&&!a?{status:"half",value:.5}:e+1>=t&&l&&a?{status:"half",value:Math.round((e-t+1)*1e10)/1e10}:{status:"void",value:0}}const Bn={size:V,icon:J("star"),color:String,count:j(5),gutter:V,clearable:Boolean,readonly:Boolean,disabled:Boolean,voidIcon:J("star-o"),allowHalf:Boolean,voidColor:String,touchable:Z,iconPrefix:String,modelValue:Ht(0),disabledColor:String};var In=O({name:Sn,props:Bn,emits:["change","update:modelValue"],setup(e,{emit:t}){const l=kt(),[a,u]=He(),n=I(),r=z(()=>e.readonly||e.disabled),m=z(()=>r.value||!e.touchable),b=z(()=>Array(+e.count).fill("").map((T,h)=>_n(e.modelValue,h+1,e.allowHalf,e.readonly)));let i,y,k=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;const x=()=>{y=E(n);const T=a.value.map(E);i=[],T.forEach((h,C)=>{k=Math.min(h.top,k),d=Math.max(h.top,d),e.allowHalf?i.push({score:C+.5,left:h.left,top:h.top,height:h.height},{score:C+1,left:h.left+h.width/2,top:h.top,height:h.height}):i.push({score:C+1,left:h.left,top:h.top,height:h.height})})},s=(T,h)=>{for(let C=i.length-1;C>0;C--)if(h>=y.top&&h<=y.bottom){if(T>i[C].left&&h>=i[C].top&&h<=i[C].top+i[C].height)return i[C].score}else{const H=h<y.top?k:d;if(T>i[C].left&&i[C].top===H)return i[C].score}return e.allowHalf?.5:1},v=T=>{r.value||T===e.modelValue||(t("update:modelValue",T),t("change",T))},f=T=>{m.value||(l.start(T),x())},B=T=>{if(!m.value&&(l.move(T),l.isHorizontal()&&!l.isTap.value)){const{clientX:h,clientY:C}=T.touches[0];Dt(T),v(s(h,C))}},w=(T,h)=>{const{icon:C,size:H,color:D,count:ae,gutter:M,voidIcon:A,disabled:K,voidColor:X,allowHalf:G,iconPrefix:oe,disabledColor:de}=e,le=h+1,ie=T.status==="full",ee=T.status==="void",Te=G&&T.value>0&&T.value<1;let ue;M&&le!==+ae&&(ue={paddingRight:Be(M)});const fe=re=>{x();let se=G?s(re.clientX,re.clientY):le;e.clearable&&l.isTap.value&&se===e.modelValue&&(se=0),v(se)};return o("div",{key:h,ref:u(h),role:"radio",style:ue,class:he("item"),tabindex:K?void 0:0,"aria-setsize":ae,"aria-posinset":le,"aria-checked":!ee,onClick:fe},[o(Ie,{size:H,name:ie?C:A,class:he("icon",{disabled:K,full:ie}),color:K?de:ie?D:X,classPrefix:oe},null),Te&&o(Ie,{size:H,style:{width:T.value+"em"},name:ee?A:C,class:he("icon",["half",{disabled:K,full:!ee}]),color:K?de:ee?X:D,classPrefix:oe},null)])};return Et(()=>e.modelValue),ke("touchmove",B,{target:n}),()=>o("div",{ref:n,role:"radiogroup",class:he({readonly:e.readonly,disabled:e.disabled}),tabindex:e.disabled?void 0:0,"aria-disabled":e.disabled,"aria-readonly":e.readonly,onTouchstartPassive:f},[b.value.map(w)])}});const Rn=Q(In),Pn={setup(){const e=I(0),t=gt(),l=I({title:"示例书名",type:"小说",summary:"这是一段关于书籍的简介。",author:"作者姓名",location:"图书馆位置",image:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",comments:[],bookInstance:[{instance_id:1,location:"A区 1楼",avlb:!0},{instance_id:2,location:"B区 3楼",avlb:!1}]}),a=I(""),u=I(0),n=I(0),r=ht(),m=()=>{window.history.back()},b=()=>{a.value!==""?(ze("/api/bookDetail/addComment/",{user:r.auth.user.userId,book:e.value,comment:a.value,rate:u.value},(k,d)=>{xe(k),y()}),a.value="",u.value=0):xe("请填写评论和评分")},i=k=>{ze("/api/bookDetail/borrow/",{user_id:r.auth.user.userId,instance_id:k},d=>{xe(d),y()})},y=()=>{Tt(`/api/bookDetail/${e.value}/`,(k,d)=>{l.value=d.book})};return Re(()=>{e.value=t.params.bookId,y()}),{book:l,newComment:a,rating:u,activeTab:n,submitComment:b,borrowBook:i,goBack:m}}},$n={class:"book-detail"},zn={class:"book-info"},Vn={class:"info-text"},An=["src"],Ln={class:"borrow-section"},Nn={class:"comments"},En={class:"borrow-section"};function Hn(e,t,l,a,u,n){const r=tt,m=yn,b=Rn,i=Wt,y=Qe,k=Je,d=Cn,x=cn,s=dn;return ce(),ve(ge,null,[o(r,{title:"书籍详细","left-arrow":"",onClickLeft:a.goBack},null,8,["onClickLeft"]),_("div",$n,[_("div",zn,[_("div",Vn,[_("p",null,[t[3]||(t[3]=_("strong",null,"书名:",-1)),p(" "+q(a.book.title),1)]),_("p",null,[t[4]||(t[4]=_("strong",null,"类型:",-1)),p(" "+q(a.book.type),1)]),_("p",null,[t[5]||(t[5]=_("strong",null,"作者:",-1)),p(" "+q(a.book.author),1)]),_("p",null,[t[6]||(t[6]=_("strong",null,"位置:",-1)),p(" "+q(a.book.location),1)])]),_("img",{src:a.book.image,alt:"Book Cover",class:"book-image"},null,8,An)]),o(m,{class:"book-card",desc:a.book.summary},null,8,["desc"]),o(s,{modelValue:a.activeTab,"onUpdate:modelValue":t[2]||(t[2]=v=>a.activeTab=v)},{default:U(()=>[o(x,{title:"评论"},{default:U(()=>[_("div",Ln,[o(b,{modelValue:a.rating,"onUpdate:modelValue":t[0]||(t[0]=v=>a.rating=v),class:"rating"},null,8,["modelValue"]),o(y,{modelValue:a.newComment,"onUpdate:modelValue":t[1]||(t[1]=v=>a.newComment=v),rows:"2",autosize:"",clearable:"",type:"textarea",maxlength:"50",placeholder:"发表你的评论","show-word-limit":"",class:"comment-input"},{button:U(()=>[o(i,{size:"small",type:"primary",onClick:a.submitComment},{default:U(()=>t[7]||(t[7]=[p("提交评论")])),_:1},8,["onClick"])]),_:1},8,["modelValue"]),_("div",Nn,[t[8]||(t[8]=_("h3",null,"评论区",-1)),o(d,null,{default:U(()=>[(ce(!0),ve(ge,null,$e(a.book.comments,(v,f)=>(ce(),yt(k,{key:f},{title:U(()=>[_("p",null,q(v.comment),1),o(b,{modelValue:v.rate,"onUpdate:modelValue":B=>v.rate=B,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})])])]),_:1}),o(x,{title:"借阅信息"},{default:U(()=>[_("div",En,[t[11]||(t[11]=_("h3",null,"借阅信息",-1)),(ce(!0),ve(ge,null,$e(a.book.bookInstance,(v,f)=>(ce(),ve("div",{key:f,class:"borrow-item"},[_("p",null,"位置: "+q(v.location),1),_("p",null,[t[9]||(t[9]=p("状态: ")),_("span",{class:Fe({available:v.avlb,unavailable:!v.avlb})},q(v.avlb?"可借阅":"已借出"),3)]),o(i,{size:"small",type:"primary",disabled:!v.avlb,onClick:B=>a.borrowBook(v.instance_id)},{default:U(()=>t[10]||(t[10]=[p(" 借阅 ")])),_:2},1032,["disabled","onClick"])]))),128))])]),_:1})]),_:1},8,["modelValue"])])],64)}const ea=xt(Pn,[["render",Hn],["__scopeId","data-v-fb75bc7a"]]);export{ea as default};
