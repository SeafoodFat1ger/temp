import"./index-BHh1TLVf.js";/* empty css              */import{N as F}from"./index-B-44DXlN.js";import{u as G,g as R}from"./index-BAswO634.js";import{d as M,i as S,r as j,n as O,p as X,v as H,c as a,a as y,w as d,b as e,F as N,q as D,o as w,h as f,e as J,s as c}from"./index-BXgsGGBr.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Q,o as U,d as Y,f as Z,m as T,I as A,r as tt,h as L,j as C,k as et,w as nt}from"./index-D5UzUt9W.js";import{S as E,a as W}from"./index-Cmesem0E.js";import{B as st}from"./index-BomqLrIU.js";import"./interceptor-B_IeSHt0.js";import"./use-route-Cqe9Mgvt.js";const[ot,h]=Q("notice-bar"),at={text:String,mode:String,color:String,delay:T(1),speed:T(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var lt=M({name:ot,props:at,emits:["close","replay"],setup(n,{emit:t,slots:u}){let m=0,r=0,k;const p=S(),i=S(),s=j({show:!0,offset:0,duration:0}),I=()=>{if(u["left-icon"])return u["left-icon"]();if(n.leftIcon)return a(A,{class:h("left-icon"),name:n.leftIcon},null)},o=()=>{if(n.mode==="closeable")return"cross";if(n.mode==="link")return"arrow"},v=l=>{n.mode==="closeable"&&(s.show=!1,t("close",l))},q=()=>{if(u["right-icon"])return u["right-icon"]();const l=o();if(l)return a(A,{name:l,class:h("right-icon"),onClick:v},null)},P=()=>{s.offset=m,s.duration=0,tt(()=>{C(()=>{s.offset=-r,s.duration=(r+m)/+n.speed,t("replay")})})},V=()=>{const l=n.scrollable===!1&&!n.wrapable,g={transform:s.offset?`translateX(${s.offset}px)`:"",transitionDuration:`${s.duration}s`};return a("div",{ref:p,role:"marquee",class:h("wrap")},[a("div",{ref:i,style:g,class:[h("content"),{"van-ellipsis":l}],onTransitionend:P},[u.default?u.default():n.text])])},_=()=>{const{delay:l,speed:g,scrollable:b}=n,z=et(l)?+l*1e3:0;m=0,r=0,s.offset=0,s.duration=0,clearTimeout(k),k=setTimeout(()=>{if(!p.value||!i.value||b===!1)return;const B=L(p).width,x=L(i).width;(b||x>B)&&C(()=>{m=B,r=x,s.offset=-r,s.duration=r/+g})},z)};return U(_),Y(_),Z("pageshow",_),G({reset:_}),O(()=>[n.text,n.scrollable],_),()=>{const{color:l,wrapable:g,background:b}=n;return X(a("div",{role:"alert",class:h({wrapable:g}),style:{color:l,background:b}},[I(),V(),q()]),[[H,s.show]])}}});const $=nt(lt),rt={components:{"van-notice-bar":$,"van-swipe":E,"van-swipe-item":W,"van-button":st},data(){return{activities:[],lectures:[]}},methods:{fetchData(){R("/api/activity/GetAllActivities/",(n,t)=>{this.activities=t}),R("/api/activity/GetAllLectures/",(n,t)=>{this.lectures=t})}},created(){this.fetchData()}},it={class:"library-app"},ct={class:"carousel"},ut={class:"carousel-item"},dt=["src"],ft={class:"info"},mt={class:"lectures"},pt=["src"],vt={class:"details"};function _t(n,t,u,m,r,k){const p=F,i=W,s=E,I=$;return w(),y("div",it,[a(p,{title:"北航图书馆活动讲座推荐"}),a(I,{"left-icon":"volume-o",scrollable:!1},{default:d(()=>[a(s,{vertical:"",class:"notice-swipe",autoplay:3e3,touchable:!1,"show-indicators":!1},{default:d(()=>[a(i,null,{default:d(()=>t[0]||(t[0]=[f("欢迎使用图书馆app！")])),_:1}),a(i,null,{default:d(()=>t[1]||(t[1]=[f("欢迎参加本月的图书馆活动！")])),_:1}),a(i,null,{default:d(()=>t[2]||(t[2]=[f("欢迎参加本月的图书馆讲座！")])),_:1})]),_:1})]),_:1}),e("div",ct,[t[5]||(t[5]=e("h2",null,"活动推荐",-1)),a(s,{autoplay:3e3},{default:d(()=>[(w(!0),y(N,null,D(r.activities,(o,v)=>(w(),J(i,{key:v},{default:d(()=>[e("div",ut,[e("img",{src:o.image,alt:"Activity"},null,8,dt),e("div",ft,[e("h3",null,c(o.name),1),e("p",null,c(o.introduction),1),e("p",null,[t[3]||(t[3]=e("strong",null,"时间：",-1)),f(c(o.date),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"组织者：",-1)),f(c(o.organizer),1)])])])]),_:2},1024))),128))]),_:1})]),e("div",mt,[t[8]||(t[8]=e("h2",null,"讲座推荐",-1)),(w(!0),y(N,null,D(r.lectures,(o,v)=>(w(),y("div",{key:v,class:"activity-card"},[e("img",{src:o.image,alt:"Lecture"},null,8,pt),e("div",vt,[e("h3",null,c(o.name),1),e("p",null,c(o.introduction),1),e("p",null,[t[6]||(t[6]=e("strong",null,"时间：",-1)),f(c(o.date),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"组织者：",-1)),f(c(o.organizer),1)])])]))),128))])])}const Nt=K(rt,[["render",_t],["__scopeId","data-v-3513a036"]]);export{Nt as default};
