import{u as W}from"./index-BHh1TLVf.js";/* empty css              *//* empty css              */import{i as X}from"./index-DFpWVYxE.js";import{d as N,i as S,c,k as M,r as j,z as Z,m as tt,u as et,A as nt,a as w,b as n,y as U,h as k,F as E,q as z,w as ot,g as H,o as _,s as x}from"./index-BXgsGGBr.js";import{u as at,e as st,f as lt,P as it,p as K}from"./index-BAswO634.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as $}from"./index-BomqLrIU.js";import{c as O,u as ct,t as F,w as R,e as G,a as ut,n as dt,s as mt,l as ft,$ as L,z as gt,x as vt,U as Bt,a0 as pt,a1 as ht}from"./index-D5UzUt9W.js";import{r as bt,u as yt}from"./use-route-Cqe9Mgvt.js";import{c as Ct}from"./interceptor-B_IeSHt0.js";const[J,V]=O("action-bar"),Q=Symbol(J),wt={placeholder:Boolean,safeAreaInsetBottom:F};var kt=N({name:J,props:wt,setup(e,{slots:d}){const s=S(),m=W(s,V),{linkChildren:i}=ct(Q);i();const B=()=>{var p;return c("div",{ref:s,class:[V(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(p=d.default)==null?void 0:p.call(d)])};return()=>e.placeholder?m(B):B()}});const _t=R(kt),[xt,St]=O("action-bar-button"),Pt=G({},bt,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Tt=N({name:xt,props:Pt,setup(e,{slots:d}){const s=yt(),{parent:m,index:i}=ut(Q),B=M(()=>{if(m){const u=m.children[i.value-1];return!(u&&"isButton"in u)}}),p=M(()=>{if(m){const u=m.children[i.value+1];return!(u&&"isButton"in u)}});return at({isButton:!0}),()=>{const{type:u,icon:C,text:h,color:P,loading:r,disabled:t}=e;return c($,{class:St([u,{last:p.value,first:B.value}]),size:"large",type:u,icon:C,color:P,loading:r,disabled:t,onClick:s},{default:()=>[d.default?d.default():h]})}}});const q=R(Tt),[Dt,v,D]=O("dialog"),At=G({},st,{title:String,theme:String,width:dt,message:[String,Function],callback:Function,allowHtml:Boolean,className:mt,transition:ft("van-dialog-bounce"),messageAlign:String,closeOnPopstate:F,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:F,closeOnClickOverlay:Boolean}),It=[...lt,"transition","closeOnPopstate"];var Et=N({name:Dt,props:At,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:d,slots:s}){const m=S(),i=j({confirm:!1,cancel:!1}),B=o=>d("update:show",o),p=o=>{var l;B(!1),(l=e.callback)==null||l.call(e,o)},u=o=>()=>{e.show&&(d(o),e.beforeClose?(i[o]=!0,Ct(e.beforeClose,{args:[o],done(){p(o),i[o]=!1},canceled(){i[o]=!1}})):p(o))},C=u("cancel"),h=u("confirm"),P=Z(o=>{var l,b;if(o.target!==((b=(l=m.value)==null?void 0:l.popupRef)==null?void 0:b.value))return;({Enter:e.showConfirmButton?h:L,Escape:e.showCancelButton?C:L})[o.key](),d("keydown",o)},["enter","esc"]),r=()=>{const o=s.title?s.title():e.title;if(o)return c("div",{class:v("header",{isolated:!e.message&&!s.default})},[o])},t=o=>{const{message:l,allowHtml:b,messageAlign:y}=e,T=v("message",{"has-title":o,[y]:y}),I=Bt(l)?l():l;return b&&typeof I=="string"?c("div",{class:T,innerHTML:I},null):c("div",{class:T},[I])},f=()=>{if(s.default)return c("div",{class:v("content")},[s.default()]);const{title:o,message:l,allowHtml:b}=e;if(l){const y=!!(o||s.title);return c("div",{key:b?1:0,class:v("content",{isolated:!y})},[t(y)])}},a=()=>c("div",{class:[ht,v("footer")]},[e.showCancelButton&&c($,{size:"large",text:e.cancelButtonText||D("cancel"),class:v("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:C},null),e.showConfirmButton&&c($,{size:"large",text:e.confirmButtonText||D("confirm"),class:[v("confirm"),{[pt]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]),g=()=>c(_t,{class:v("footer")},{default:()=>[e.showCancelButton&&c(q,{type:"warning",text:e.cancelButtonText||D("cancel"),class:v("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:C},null),e.showConfirmButton&&c(q,{type:"danger",text:e.confirmButtonText||D("confirm"),class:v("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]}),A=()=>s.footer?s.footer():e.theme==="round-button"?g():a();return()=>{const{width:o,title:l,theme:b,message:y,className:T}=e;return c(it,tt({ref:m,role:"dialog",class:[v([b]),T],style:{width:vt(o)},tabindex:0,"aria-labelledby":l||y,onKeydown:P,"onUpdate:show":B},gt(e,It)),{default:()=>[r(),f(),A()]})}}});const zt=R(Et),$t={class:"page-container"},Ft={class:"navigation-bar"},Nt={class:"tabs"},Ot={class:"section"},Rt={class:"similar-users"},Mt={class:"user-info"},Ut={class:"username"},Ht={class:"view-more"},Kt=["onClick"],Lt={class:"books"},Vt={class:"book-title"},Y="analysis",qt={__name:"profile_Cluster",setup(e){j([{name:"Bob",books:["‰π¶2","‰π¶2","‰π¶2","‰π¶2"]},{name:"Charlie",books:["‰π¶3","‰π¶3","‰π¶3","‰π¶3"]}]);const d=et(),s=S([]);async function m(){K("/api/profile/getSimilarUsers/",{userId:d.auth.user.userId},(r,t)=>{s.value=t})}const i=S(!1),B=S([]);function p(r){const t=s.value.find(f=>f.name===r);B.value=t.books,i.value=!0}async function u(){const r=S([]);return new Promise((t,f)=>{K("/api/profile/getAllBorrowedType/",{userId:d.auth.user.userId},(a,g)=>{a==="Êìç‰ΩúÊàêÂäü"?(r.value=g,t(r)):f("Failed to fetch type data")})})}async function C(){const r=await u(),t=document.getElementById("chart");if(!t)return;const f=r.value.map(l=>l.value),a=f.length>0?Math.max(...f):1,g=r.value.map(l=>({name:l.name,max:Math.max(Math.ceil(a*1.2),5)})),A={title:{text:"",left:"center",textStyle:{fontSize:15}},tooltip:{trigger:"item"},radar:{shape:"polygon",indicator:g,radius:"60%",axisName:{color:"#333",fontSize:12},splitLine:{lineStyle:{color:["rgba(36,85,94,0.5)"]}},splitArea:{areaStyle:{color:["#f9f9f9","rgba(194,234,238,0.35)"]}}},series:[{name:"Áî®Êà∑ÂàÜÊûê",type:"radar",data:[{value:f,name:"ÂÄüÈòÖÊÉÖÂÜµ",areaStyle:{opacity:.2},lineStyle:{color:"#5470C6"}}]}]},o=X(t);o.setOption(A),window.addEventListener("resize",()=>{o.resize()})}nt(()=>{m(),C()});function h(r){r&&H.push(r)}function P(){H.push("/home/profile")}return(r,t)=>{const f=zt;return _(),w("div",$t,[n("div",Ft,[n("div",{class:"left-section",onClick:P},t[3]||(t[3]=[n("span",{class:"arrow"},"<",-1)])),n("div",Nt,[n("span",{class:U(["tab",{active:Y==="history"}]),onClick:t[0]||(t[0]=a=>h("/home/profile_History"))},"ÂÄüÈòÖÂéÜÂè≤",2),n("span",{class:U(["tab",{active:Y==="analysis"}]),onClick:t[1]||(t[1]=a=>h("/home/profile_Cluster"))},"ËÅöÁ±ªÂàÜÊûê",2)])]),t[13]||(t[13]=n("div",{class:"section"},[n("h2",{class:"section-title"},[n("span",{class:"highlight"}),k("ÊàëÁöÑÂÄüÈòÖÂàÜÊûê ")]),n("div",{id:"chart",class:"chart-container"})],-1)),n("div",Ot,[t[6]||(t[6]=n("h2",{class:"section-title"},[n("span",{class:"highlight"}),k("ÂíåÊàëÁ±ª‰ººÁöÑÁî®Êà∑ ")],-1)),n("div",Rt,[(_(!0),w(E,null,z(s.value,a=>(_(),w("div",{key:a.name,class:"user-card"},[n("div",Mt,[t[4]||(t[4]=n("div",{class:"avatar"},null,-1)),n("span",Ut,x(a.name),1),n("div",Ht,[n("span",{onClick:g=>p(a.name)},"üîé‰ªñÁöÑ‰π¶Âçï",8,Kt)])]),n("div",Lt,[(_(!0),w(E,null,z(a.books,g=>(_(),w("div",{key:g.book_id,class:"book"},[t[5]||(t[5]=n("div",{class:"book-cover"},null,-1)),n("span",Vt,x(g.book_title),1)]))),128))])]))),128))])]),c(f,{show:i.value,"onUpdate:show":t[2]||(t[2]=a=>i.value=a),title:"‰π¶Á±ç‰ø°ÊÅØ","show-confirm-button":""},{default:ot(()=>[(_(!0),w(E,null,z(B.value,(a,g)=>(_(),w("div",{key:g,class:"book-detail"},[t[12]||(t[12]=n("p",null,[n("strong",null,"-------------------")],-1)),n("p",null,[t[7]||(t[7]=n("strong",null,"‰π¶ÂêçÔºö",-1)),k(x(a.book_title),1)]),n("p",null,[t[8]||(t[8]=n("strong",null,"‰π¶IDÔºö",-1)),k(x(a.book_id),1)]),n("p",null,[t[9]||(t[9]=n("strong",null,"Á±ªÂûãÔºö",-1)),k(x(a.book_type),1)]),n("p",null,[t[10]||(t[10]=n("strong",null,"‰ΩúËÄÖÔºö",-1)),k(x(a.book_author),1)]),n("p",null,[t[11]||(t[11]=n("strong",null,"‰ΩçÁΩÆÔºö",-1)),k(x(a.book_location),1)])]))),128))]),_:1},8,["show"])])}}},oe=rt(qt,[["__scopeId","data-v-f4cfc110"]]);export{oe as default};
